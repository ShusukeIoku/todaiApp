(function(t){function e(e){for(var n,o,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)o=i[d],a[o]&&p.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],n=!0,i=1;i<s.length;i++){var c=s[i];0!==a[c]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=s[0]))}return t}var n={},a={app:0},r=[];function o(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=n,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(s,n,function(e){return t[e]}.bind(null,n));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0ae0":function(t,e,s){"use strict";var n=s("27ef"),a=s.n(n);a.a},1057:function(t,e,s){"use strict";var n=s("d11b"),a=s.n(n);a.a},"110b":function(t,e,s){"use strict";var n=s("15c0"),a=s.n(n);a.a},"15c0":function(t,e,s){},"182a":function(t,e,s){},"27ef":function(t,e,s){},"2b30":function(t,e,s){},4460:function(t,e,s){"use strict";var n=s("2b30"),a=s.n(n);a.a},4476:function(t,e,s){"use strict";var n=s("5a16"),a=s.n(n);a.a},"482c":function(t,e,s){"use strict";var n=s("5839"),a=s.n(n);a.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var n=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Header"),s("main",[s("router-view")],1),s("Footer")],1)},r=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",[s("div",{staticClass:"titles"},[s("h1",{on:{click:function(e){return t.$router.push("/")}}},[t._v("todaiApp.")]),s("p",{staticClass:"subtitle"},[t._v("使った分だけ差がつくアプリ")])]),s("nav",{staticClass:"flex"},[t.currentUser?s("button",{staticClass:"flex btn-with-img bg",on:{click:function(e){return t.$router.push("/edit")}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"pen-alt"}})],1),s("p",{staticClass:"txt"},[t._v("問題を作成")])]):t._e(),t.currentUser?s("button",{staticClass:"sm btn",on:{click:function(e){return t.$router.push("/edit")}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"pen-alt"}})],1),s("p",{staticClass:"txt"},[t._v("問題を作成")])]):s("button",{staticClass:"flex btn-with-img bg",on:{click:t.signIn}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"user"}})],1),s("p",{staticClass:"txt"},[t._v("サインイン")])]),t.currentUser?s("button",{staticClass:"flex btn-with-img",on:{click:function(e){return t.$router.push("/user/"+t.currentUser.uid)}}},[s("div",{staticClass:"img",style:"background-image: url("+t.currentUser.photoURL+");"})]):s("button",{staticClass:"sm btn",on:{click:t.signIn}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"user"}})],1),s("p",{staticClass:"txt"},[t._v("サインイン")])])])])},i=[],c=s("8aa5"),l=s.n(c),u={data:function(){return{currentUser:{}}},created:function(){var t=this;ie.onAuthStateChanged(function(e){t.currentUser=e})},methods:{signIn:function(){var t=this,e=new l.a.auth.GoogleAuthProvider;ie.signInWithPopup(e).then(function(e){t.createUser(e.user),t.$router.push("/user/"+e.user.uid),t.$toasted.show(e.user.displayName+"さん、こんにちは！",{position:"top-center",duration:1500})})},createUser:function(t){oe.collection("users").doc(t.uid).set({name:t.displayName,photoURL:t.photoURL,email:t.email,schoolPublic:!0},{merge:!0})}}},d=u,p=(s("4476"),s("2877")),m=Object(p["a"])(d,o,i,!1,null,"39023bd0",null),v=m.exports,b=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},h=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("footer",[s("h1",[t._v("todaiApp")]),s("p",{staticClass:"cr"},[t._v("Copyright 2019 todaiApp All Rights Reserved.")])])}],f=(s("6cd9"),{}),g=Object(p["a"])(f,b,h,!1,null,"3237e63c",null),_=g.exports,w={components:{Header:v,Footer:_}},C=w,x=(s("7faf"),Object(p["a"])(C,a,r,!1,null,null,null)),k=x.exports,y=s("8c4f"),S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"top"},[s("div",{staticClass:"title flex"},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"search"}})],1),t._m(0)]),s("div",{staticClass:"selectors flex"},[s("div",{staticClass:"selector subject"},[s("label",[t._v("科目で選ぶ")]),s("div",{staticClass:"flex wrap selects"},[s("button",{staticClass:"select",class:{active:""==t.selectedSubject},on:{click:function(e){t.selectedSubject="",t.selectedGenre=""}}},[t._v("\n          全科目\n        ")]),s("button",{staticClass:"select",class:{active:"英語"==t.selectedSubject},on:{click:function(e){t.selectedSubject="英語",t.selectedGenre=""}}},[t._v("\n          英語\n        ")]),s("button",{staticClass:"select",class:{active:"数学"==t.selectedSubject},on:{click:function(e){t.selectedSubject="数学",t.selectedGenre=""}}},[t._v("\n          数学\n        ")])])]),s("div",{staticClass:"selector"},[s("label",[t._v("ジャンルで選ぶ")]),""==t.selectedSubject?s("div",{staticClass:"flex wrap selects"},[s("button",{staticClass:"select",class:{active:""==t.selectedGenre},on:{click:function(e){t.selectedGenre=""}}},[t._v("\n          全ジャンル\n        ")])]):t._e(),"英語"==t.selectedSubject?s("div",{staticClass:"flex wrap selects"},[s("button",{staticClass:"select",class:{active:""==t.selectedGenre},on:{click:function(e){t.selectedGenre=""}}},[t._v("\n          全ジャンル\n        ")]),t._l(t.genreEnglish,function(e,n){return s("button",{key:n,staticClass:"select",class:{active:t.selectedGenre==e},on:{click:function(s){t.selectedGenre=e}}},[t._v("\n          "+t._s(e)+"\n        ")])})],2):t._e(),"数学"==t.selectedSubject?s("div",{staticClass:"flex wrap selects"},[s("button",{staticClass:"select",class:{active:""==t.selectedGenre},on:{click:function(e){t.selectedGenre=""}}},[t._v("\n          全ジャンル\n        ")]),t._l(t.genreMath,function(e,n){return s("button",{key:n,staticClass:"select",class:{active:t.selectedGenre==e},on:{click:function(s){t.selectedGenre=e}}},[t._v("\n          "+t._s(e)+"\n        ")])})],2):t._e()])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"serach",attrs:{type:"text",placeholder:"キーワードで選ぶ"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._l(t.filterBy(t.filterBy(t.filterBy(t.problems,t.query,"title"),t.selectedGenre,"genre"),t.selectedSubject,"subject"),function(t){return s("Item",{key:t.id,attrs:{problem:t,uid:t.user}})})],2)},$=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"txts"},[s("h1",[t._v("問題をさがす")]),s("p",{staticClass:"sub-title"},[t._v("Browse Problems")])])}],T=s("a7c6"),j=s.n(T),A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item"},[s("div",{staticClass:"flex"},[s("div",{staticClass:"subjects"},[s("span",[t._v(t._s(t.problem.subject))]),s("span",[t._v("|")]),s("span",[t._v(t._s(t.problem.genre))])]),s("p",[t._v(t._s(t.problem.title))])]),s("UserInfo",{attrs:{uid:t.uid}}),s("Buttons",{attrs:{problem:t.problem,noStock:t.noStock}}),s("p",{staticClass:"date"})],1)},U=[],P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"buttons flex"},[s("div",[s("router-link",{attrs:{to:"/problem/"+t.problem.id}},[s("button",{staticClass:"box-btn"},[s("fa",{attrs:{icon:"pen-alt"}}),t.hide?s("span",[t._v(" 解答を確認する")]):s("span",[t._v(" 問題をみる")])],1)]),t.currentUser&&!t.hide?s("button",{staticClass:"box-btn",class:{stocked:t.stocked},on:{click:t.toggleStock}},[s("fa",{attrs:{icon:"save"}}),t.stocked?s("span",[t._v(" ストック中")]):s("span",[t._v(" 問題をストックする")])],1):t._e()],1),t.hide?t._e():s("p",{staticClass:"answers"},[s("fa",{attrs:{icon:"grin"}}),t._v("\n    "+t._s(t.answers.length)+"人が解答\n  ")],1)])},I=[],E={props:["problem","hide"],data:function(){return{currentUser:{},stocked:{},answers:[]}},created:function(){var t=this;ie.onAuthStateChanged(function(e){t.currentUser=e,oe.collection("users").doc(e.uid).collection("stocks").doc(t.$props.problem.id).onSnapshot(function(e){t.stocked=e.data()})})},firestore:function(){return{answers:oe.collection("answers").where("problem","==",this.$props.problem.id)}},methods:{toggleStock:function(){this.stocked?oe.collection("users").doc(this.currentUser.uid).collection("stocks").doc(this.$props.problem.id).delete().then(this.$toasted.show("問題をストックから削除しました。",{position:"top-center",duration:1500})):oe.collection("users").doc(this.currentUser.uid).collection("stocks").doc(this.$props.problem.id).set({content:this.$props.problem.content,genre:this.$props.problem.genre,subject:this.$props.problem.subject,title:this.$props.problem.title,user:this.$props.problem.user}).then(this.$toasted.show("問題をストックしました！",{position:"top-center",duration:1500}))}}},L=E,O=(s("8c64"),Object(p["a"])(L,P,I,!1,null,"7eb02cb1",null)),G=O.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-info"},[s("div",{staticClass:"flex"},[s("div",{staticClass:"img",style:"background-image: url("+t.user.photoURL+");"},[s("div",{staticClass:"badge contribution",class:{padawan:t.problemsSolved.length+3*t.problemsCreated.length<4,intermediate:t.problemsSolved.length+3*t.problemsCreated.length>=4&&t.problemsSolved.length+3*t.problemsCreated.length<10,master:t.problemsSolved.length+3*t.problemsCreated.length>=10&&t.problemsSolved.length+3*t.problemsCreated.length<20,lord:t.problemsSolved.length+3*t.problemsCreated.length>=20}},[t._v("\n        "+t._s(t.problemsSolved.length+3*t.problemsCreated.length)+"\n      ")]),t.user.twitter?s("a",{attrs:{href:"https://twitter.com/"+t.user.twitter,target:"_blank"}},[s("div",{staticClass:"badge twicon"},[s("fa",{attrs:{icon:["fab","twitter"]}})],1)]):t._e()]),s("div",{staticClass:"txts"},[t.user.nickname?s("p",{staticClass:"name"},[t._v(t._s(t.user.nickname))]):s("p",{staticClass:"name"},[t._v(t._s(t.user.name))]),s("p",{staticClass:"info"},[t.user.school?s("span",[t._v(t._s(t.user.school))]):t._e(),t.user.grade?s("span",[t._v(" ("+t._s(t.user.grade)+")")]):t._e()])])])])},M=[],q={props:["uid"],data:function(){return{user:{},problemsCreated:[],problemsSolved:[]}},firestore:function(){return{user:oe.collection("users").doc(this.$props.uid),problemsCreated:oe.collection("problems").where("user","==",this.$props.uid),problemsSolved:oe.collection("answers").where("user","==",this.$props.uid)}}},B=q,R=(s("4460"),Object(p["a"])(B,N,M,!1,null,"4f5fff4e",null)),H=R.exports,F={props:["problem","uid","noStock"],components:{UserInfo:H,Buttons:G}},D=F,J=(s("cbcb"),Object(p["a"])(D,A,U,!1,null,null,null)),X=J.exports,z={name:"top",head:{meta:[{name:"description",content:"todaiAppは、東大志望者＆現役東大生を主体とする相互出題・相互解答コミュニティです。"},{property:"og:title",content:"todaiApp"},{property:"og:description",content:"todaiAppは、東大志望者＆現役東大生を主体とする相互出題・相互解答コミュニティです。"},{property:"og:type",content:"website"},{property:"og:url",content:"https://todaiapp.com/"},{property:"og:image",content:"../../public/img/logo.png"},{name:"twitter:card",content:"summary"}]},data:function(){return{problems:[],query:"",selectedSubject:"",selectedGenre:"",genreEnglish:["要約","和訳","英作文","リスニング","英文法","英訳","総合問題"],genreMath:["数I","数II","数III","数A","数B","数C"]}},components:{Item:X},firestore:function(){return{problems:oe.collection("problems").orderBy("date","desc")}},mixins:[j.a.mixin]},W=z,Y=(s("8e14"),Object(p["a"])(W,S,$,!1,null,"93922b44",null)),K=Y.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user"},[s("div",{staticClass:"title flex"},[s("div",{staticClass:"img",style:"background-image: url("+t.user.photoURL+");"},[s("div",{staticClass:"badge contribution",class:{padawan:t.problemsSolved.length+3*t.problemsCreated.length<4,intermediate:t.problemsSolved.length+3*t.problemsCreated.length>=4&&t.problemsSolved.length+3*t.problemsCreated.length<10,master:t.problemsSolved.length+3*t.problemsCreated.length>=10&&t.problemsSolved.length+3*t.problemsCreated.length<20,lord:t.problemsSolved.length+3*t.problemsCreated.length>=20}},[t._v("\n        "+t._s(t.problemsSolved.length+3*t.problemsCreated.length)+"\n      ")]),t.user.twitter?s("a",{attrs:{href:"https://twitter.com/"+t.user.twitter,target:"_blank"}},[s("div",{staticClass:"badge twicon"},[s("fa",{attrs:{icon:["fab","twitter"]}})],1)]):t._e()]),s("div",{staticClass:"txts"},[t.user.nickname?s("h1",[t._v(t._s(t.user.nickname))]):s("h1",[t._v(t._s(t.user.name))]),s("p",{staticClass:"sub-title"},[t.user.school?s("span",[t._v(t._s(t.user.school))]):t._e(),t.user.grade?s("span",[t._v(" ("+t._s(t.user.grade)+")")]):t._e()])])]),s("nav",{staticClass:"flex page-nav"},[s("button",{staticClass:"flex btn-with-img",class:{active:"info"==t.activeTab},on:{click:function(e){t.activeTab="info"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"info"}})],1),s("p",{staticClass:"txt"},[t._v("あなたの情報")])]),s("button",{staticClass:"flex btn-with-img",class:{active:"created"==t.activeTab},on:{click:function(e){t.activeTab="created"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"pen-alt"}})],1),s("p",{staticClass:"txt"},[t._v("作成した問題")])]),s("button",{staticClass:"flex btn-with-img",class:{active:"solved"==t.activeTab},on:{click:function(e){t.activeTab="solved"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"hand-paper"}})],1),s("p",{staticClass:"txt"},[t._v("解答した問題")])]),s("button",{staticClass:"flex btn-with-img",class:{active:"stocked"==t.activeTab},on:{click:function(e){t.activeTab="stocked"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"save"}})],1),s("p",{staticClass:"txt"},[t._v("ストックした問題")])]),s("button",{staticClass:"flex btn-with-img",on:{click:t.signOut}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"door-open"}})],1),s("p",{staticClass:"txt"},[t._v("ログアウトする")])])]),s("nav",{staticClass:"sm-page-nav"},[s("button",{staticClass:"btn",class:{active:"info"==t.activeTab},on:{click:function(e){t.activeTab="info"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"info"}})],1),s("p",{staticClass:"txt"},[t._v("あなたの情報")])]),s("button",{staticClass:"btn",class:{active:"created"==t.activeTab},on:{click:function(e){t.activeTab="created"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"pen-alt"}})],1),s("p",{staticClass:"txt"},[t._v("作成した問題")])]),s("button",{staticClass:"btn",class:{active:"solved"==t.activeTab},on:{click:function(e){t.activeTab="solved"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"hand-paper"}})],1),s("p",{staticClass:"txt"},[t._v("解答した問題")])]),s("button",{staticClass:"btn",class:{active:"stocked"==t.activeTab},on:{click:function(e){t.activeTab="stocked"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"save"}})],1),s("p",{staticClass:"txt"},[t._v("ストック")])]),s("button",{staticClass:"btn",on:{click:t.signOut}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"door-open"}})],1),s("p",{staticClass:"txt"},[t._v("ログアウト")])])]),"info"==t.activeTab?s("div",{staticClass:"tab-content"},[s("label",{attrs:{for:"nickname"}},[t._v("ユーザー名（Enterキーで保存）")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.nickname,expression:"user.nickname"}],attrs:{type:"text",name:"nickname"},domProps:{value:t.user.nickname},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveInfo("nickname")},input:function(e){e.target.composing||t.$set(t.user,"nickname",e.target.value)}}}),s("label",{attrs:{for:"school"}},[t._v("学校名（Enterキーで保存）")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.school,expression:"user.school"}],attrs:{type:"text",name:"school"},domProps:{value:t.user.school},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveInfo("school")},input:function(e){e.target.composing||t.$set(t.user,"school",e.target.value)}}}),s("label",{attrs:{for:"grade"}},[t._v("学年（選択すると自動で保存）")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.user.grade,expression:"user.grade"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.user,"grade",e.target.multiple?s:s[0])},function(e){return t.saveInfo("grade")}]}},[s("option",{attrs:{value:""}},[t._v("選択してください")]),t._l(t.grades,function(e,n){return s("option",{key:n,domProps:{value:e}},[t._v("\n        "+t._s(e)+"\n      ")])})],2),s("label",{attrs:{for:"twitter"}},[t._v("Twitter ID（Enterキーで保存）")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.twitter,expression:"user.twitter"}],attrs:{type:"text",name:"twitter"},domProps:{value:t.user.twitter},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveInfo("twitter")},input:function(e){e.target.composing||t.$set(t.user,"twitter",e.target.value)}}})]):t._e(),"created"==t.activeTab?s("div",{staticClass:"tab-content"},t._l(t.problemsCreated,function(t){return s("Item",{key:t.id,attrs:{problem:t,uid:t.user}})}),1):t._e(),"solved"==t.activeTab?s("div",{staticClass:"tab-content"},t._l(t.problemsSolved,function(t){return s("AltItem",{key:t.id,attrs:{answer:t,uid:t.problemAuthor,problemId:t.problem}})}),1):t._e(),"stocked"==t.activeTab?s("div",{staticClass:"tab-content"},t._l(t.problemsStocked,function(t){return s("Item",{key:t.id,attrs:{problem:t,uid:t.user}})}),1):t._e()])},Z=[],V=(s("7f7f"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item"},[s("div",{staticClass:"flex"},[s("div",{staticClass:"subjects"},[s("span",[t._v(t._s(t.answer.problemSubject))]),s("span",[t._v("|")]),s("span",[t._v(t._s(t.answer.problemGenre))])]),s("p",[t._v(t._s(t.answer.problemTitle))])]),s("UserInfo",{attrs:{uid:t.uid}}),s("Buttons",{attrs:{problem:t.problem,hide:"true"}}),s("p",{staticClass:"date"})],1)}),tt=[],et={props:["answer","uid"],components:{UserInfo:H,Buttons:G},data:function(){return{problem:{}}},firestore:function(){return{problem:oe.collection("problems").doc(this.$props.answer.problem)}}},st=et,nt=Object(p["a"])(st,V,tt,!1,null,null,null),at=nt.exports,rt={data:function(){return{user:{},currentUser:{},problemsCreated:[],problemsSolved:[],problemsStocked:[],activeTab:"info",grades:["中学1年","中学2年","中学3年","高校1年","高校2年","高校3年","大学生","大卒"]}},head:{title:function(){return{inner:"ユーザーページ"}},meta:[{name:"description",content:"ユーザーページ"},{property:"og:title",content:"ユーザーページ"},{property:"og:description",content:"ユーザーページ"},{property:"og:type",content:"website"},{property:"og:url",content:"https://todaiapp.com/"},{property:"og:image",content:"../../public/img/logo.png"},{name:"twitter:card",content:"summary"}]},components:{Item:X,AltItem:at},firestore:function(){return{user:oe.collection("users").doc(this.$route.params.uid),problemsCreated:oe.collection("problems").where("user","==",this.$route.params.uid),problemsSolved:oe.collection("answers").where("user","==",this.$route.params.uid),problemsStocked:oe.collection("users").doc(this.$route.params.uid).collection("stocks")}},created:function(){var t=this;ie.onAuthStateChanged(function(e){t.currentUser=e})},methods:{signOut:function(){window.confirm("サインアウトしてよろしいですか？")&&ie.signOut().then(this.$router.push("/"),location.reload(),this.$toasted.show(this.user.name+"さん、またあとで！",{position:"top-center",duration:1500}))},saveInfo:function(t){var e=oe.collection("users").doc(this.$route.params.uid);"nickname"==t?e.set({nickname:this.user.nickname},{merge:!0}).then(this.$toasted.show("変更を保存しました。",{position:"top-center",duration:1500})):"school"==t?e.set({school:this.user.school},{merge:!0}).then(this.$toasted.show("変更を保存しました。",{position:"top-center",duration:1500})):"grade"==t?e.set({grade:this.user.grade},{merge:!0}).then(this.$toasted.show("変更を保存しました。",{position:"top-center",duration:1500})):"twitter"==t&&e.set({twitter:this.user.twitter},{merge:!0}).then(this.$toasted.show("変更を保存しました。",{position:"top-center",duration:1500}))}}},ot=rt,it=(s("760a"),Object(p["a"])(ot,Q,Z,!1,null,"a1aee0f0",null)),ct=it.exports,lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-public"},[s("div",{staticClass:"title flex"},[s("div",{staticClass:"img",style:"background-image: url("+t.user.photoURL+");"},[s("div",{staticClass:"badge contribution",class:{padawan:t.problemsSolved.length+3*t.problemsCreated.length<4,intermediate:t.problemsSolved.length+3*t.problemsCreated.length>=4&&t.problemsSolved.length+3*t.problemsCreated.length<10,master:t.problemsSolved.length+3*t.problemsCreated.length>=10&&t.problemsSolved.length+3*t.problemsCreated.length<20,lord:t.problemsSolved.length+3*t.problemsCreated.length>=20}},[t._v("\n        "+t._s(t.problemsSolved.length+3*t.problemsCreated.length)+"\n      ")]),t.user.twitter?s("a",{attrs:{href:"https://twitter.com/"+t.user.twitter,target:"_blank"}},[s("div",{staticClass:"badge twicon"},[s("fa",{attrs:{icon:["fab","twitter"]}})],1)]):t._e()]),s("div",{staticClass:"txts"},[t.user.nickname?s("h1",[t._v(t._s(t.user.nickname))]):s("h1",[t._v(t._s(t.user.name))]),s("p",{staticClass:"sub-title"},[t.user.school?s("span",[t._v(t._s(t.user.school))]):t._e(),t.user.grade?s("span",[t._v(" ("+t._s(t.user.grade)+")")]):t._e()])])]),s("nav",{staticClass:"flex page-nav"},[s("button",{staticClass:"flex btn-with-img",class:{active:"general"==t.activeTab},on:{click:function(e){t.activeTab="general"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"database"}})],1),s("p",{staticClass:"txt"},[t._v("総合データ")])]),s("button",{staticClass:"flex btn-with-img",class:{active:"created"==t.activeTab},on:{click:function(e){t.activeTab="created"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"pen-alt"}})],1),s("p",{staticClass:"txt"},[t._v("出題データ")])]),s("button",{staticClass:"flex btn-with-img",class:{active:"solved"==t.activeTab},on:{click:function(e){t.activeTab="solved"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"grin"}})],1),s("p",{staticClass:"txt"},[t._v("解答データ")])])])])},ut=[],dt={data:function(){return{user:{},activeTab:"general",problemsCreated:[],problemsSolved:[]}},firestore:function(){return{user:oe.collection("users").doc(this.$route.params.uid),problemsCreated:oe.collection("problems").where("user","==",this.$route.params.uid),problemsSolved:oe.collection("answers").where("user","==",this.$route.params.uid)}}},pt=dt,mt=(s("482c"),Object(p["a"])(pt,lt,ut,!1,null,"a6efd7a6",null)),vt=mt.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"create"},[s("div",{staticClass:"title flex"},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"pen-alt"}})],1),t._m(0)]),s("nav",{staticClass:"flex page-nav"},[s("button",{staticClass:"flex btn-with-img",class:{active:"editor"==t.activeTab},on:{click:function(e){t.activeTab="editor"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"pen-alt"}})],1),s("p",{staticClass:"txt"},[t._v("問題を編集する")])]),s("button",{staticClass:"flex btn-with-img",class:{active:"howto"==t.activeTab},on:{click:function(e){t.activeTab="howto"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"question"}})],1),s("p",{staticClass:"txt"},[t._v("問題のつくり方")])])]),"editor"==t.activeTab?s("div",{staticClass:"tab-content"},[s("label",[t._v("科目")]),s("div",{staticClass:"flex wrap selects"},[s("button",{staticClass:"select",class:{active:"英語"==t.selectedSubject},on:{click:function(e){t.selectedSubject="英語"}}},[t._v("\n        英語\n      ")]),s("button",{staticClass:"select",class:{active:"数学"==t.selectedSubject},on:{click:function(e){t.selectedSubject="数学"}}},[t._v("\n        数学\n      ")])]),s("label",[t._v("ジャンル")]),"英語"==t.selectedSubject?s("div",{staticClass:"flex wrap selects"},t._l(t.genreEnglish,function(e,n){return s("button",{key:n,staticClass:"select",class:{active:t.selectedGenre==e},on:{click:function(s){t.selectedGenre=e}}},[t._v("\n        "+t._s(e)+"\n      ")])}),0):t._e(),"数学"==t.selectedSubject?s("div",{staticClass:"flex wrap selects"},t._l(t.genreMath,function(e,n){return s("button",{key:n,staticClass:"select",class:{active:t.selectedGenre==e},on:{click:function(s){t.selectedGenre=e}}},[t._v("\n        "+t._s(e)+"\n      ")])}),0):t._e(),s("label",{attrs:{for:"title"}},[t._v("タイトル, キーワード")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",name:"title",placeholder:"出題のテーマや解答者への一言など"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),s("label",{attrs:{for:"content"}},[t._v("\n      問題文（他サイト等の文章を用いる場合は、引用元を明記してください）\n    ")]),s("div",{staticClass:"flex edit-box"},[t.isShown?s("button",{staticClass:"preview",on:{click:function(e){t.isShown=!t.isShown}}},[s("fa",{attrs:{icon:"eye"}}),t._v("\n        プレビューをひらく\n      ")],1):s("button",{staticClass:"preview",on:{click:function(e){t.isShown=!t.isShown}}},[s("fa",{attrs:{icon:"eye"}}),t._v("\n        プレビューをしまう\n      ")],1),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{type:"text",name:"content"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),s("div",{staticClass:"view body",class:{shown:t.isShown},domProps:{innerHTML:t._s(t.md.render(t.content))}})]),s("label",{attrs:{for:"content"}},[t._v("\n      解答, 解説（答えがわからない場合は、途中経過を書きましょう）\n    ")]),s("div",{staticClass:"flex edit-box"},[t.isShown?s("button",{staticClass:"preview",on:{click:function(e){t.isShown=!t.isShown}}},[s("fa",{attrs:{icon:"eye"}}),t._v("\n        プレビューをひらく\n      ")],1):s("button",{staticClass:"preview",on:{click:function(e){t.isShown=!t.isShown}}},[s("fa",{attrs:{icon:"eye"}}),t._v("\n        プレビューをしまう\n      ")],1),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.answer,expression:"answer"}],attrs:{type:"text",name:"content"},domProps:{value:t.answer},on:{input:function(e){e.target.composing||(t.answer=e.target.value)}}}),s("div",{staticClass:"view body",class:{shown:t.isShown},domProps:{innerHTML:t._s(t.md.render(t.answer))}})]),s("button",{staticClass:"submit",class:{ready:t.selectedSubject&&t.selectedGenre&&t.title&&t.content&&t.answer},on:{click:t.saveProblem}},[t._v("\n      問題を公開する\n    ")])]):t._e(),"howto"==t.activeTab?s("div",{staticClass:"tab-content howto"},[t._m(1),s("h2",{attrs:{id:"head1"}},[t._v("Markdownを使ってみよう！")]),s("p",[t._v("\n      todaiForumでは、問題や解答を「マークダウン」という形式で編集します。\n      マークダウンについて聞いたことがない人も、使い方はとても簡単なので、心配は無用です。\n    ")]),t._m(2),s("h2",{attrs:{id:"head2"}},[t._v("ヘッダーを書く")]),s("p",[t._v("\n      ヘッダーにしたい文の頭にシャープ（#）をつけます。シャープを増やすほどレベルが下がります。\n    ")]),s("div",{staticClass:"flex edit-box"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.ex1,expression:"ex1"}],attrs:{type:"text",name:"content"},domProps:{value:t.ex1},on:{input:function(e){e.target.composing||(t.ex1=e.target.value)}}}),s("div",{staticClass:"view body",domProps:{innerHTML:t._s(t.md.render(t.ex1))}})]),s("h2",{attrs:{id:"head5"}},[t._v("リストをつくる")]),s("p"),s("div",{staticClass:"flex edit-box"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.ex4,expression:"ex4"}],attrs:{type:"text",name:"content"},domProps:{value:t.ex4},on:{input:function(e){e.target.composing||(t.ex4=e.target.value)}}}),s("div",{staticClass:"view body",domProps:{innerHTML:t._s(t.md.render(t.ex4))}})]),s("h2",{attrs:{id:"head3"}},[t._v("リンクをつくる")]),s("p",[t._v("[リンクのテキスト](リンク先のURL)のように書きます。")]),s("div",{staticClass:"flex edit-box"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.ex2,expression:"ex2"}],attrs:{type:"text",name:"content"},domProps:{value:t.ex2},on:{input:function(e){e.target.composing||(t.ex2=e.target.value)}}}),s("div",{staticClass:"view body",domProps:{innerHTML:t._s(t.md.render(t.ex2))}})]),s("h2",{attrs:{id:"head8"}},[t._v("引用する")]),s("div",{staticClass:"flex edit-box"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.ex7,expression:"ex7"}],attrs:{type:"text",name:"content"},domProps:{value:t.ex7},on:{input:function(e){e.target.composing||(t.ex7=e.target.value)}}}),s("div",{staticClass:"view body",domProps:{innerHTML:t._s(t.md.render(t.ex7))}})]),s("h2",{attrs:{id:"head7"}},[t._v("画像を貼り付ける")]),t._m(3),s("div",{staticClass:"flex edit-box"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.ex6,expression:"ex6"}],attrs:{type:"text",name:"content"},domProps:{value:t.ex6},on:{input:function(e){e.target.composing||(t.ex6=e.target.value)}}}),s("div",{staticClass:"view body",domProps:{innerHTML:t._s(t.md.render(t.ex6))}})]),s("h2",{attrs:{id:"head4"}},[t._v("数式を書く")]),s("p",[t._v("\n      数式は「Latex（レイテック, ラテフなどと読む）」という書き方を使います。\n      ２種類の書き方があります。\n      文章内で数字を使いたい場合には「$x^2$」のように左右を「$」で囲います。\n      数式だけで一行分を使いたい場合には、下のように上下を「$$」で囲います。\n    ")]),t._m(4),s("div",{staticClass:"flex edit-box"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.ex3,expression:"ex3"}],attrs:{type:"text",name:"content"},domProps:{value:t.ex3},on:{input:function(e){e.target.composing||(t.ex3=e.target.value)}}}),s("div",{staticClass:"view body",domProps:{innerHTML:t._s(t.md.render(t.ex3))}})]),s("h2",{attrs:{id:"head6"}},[t._v("表を書く")]),s("div",{staticClass:"flex edit-box"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.ex5,expression:"ex5"}],attrs:{type:"text",name:"content"},domProps:{value:t.ex5},on:{input:function(e){e.target.composing||(t.ex5=e.target.value)}}}),s("div",{staticClass:"view body",domProps:{innerHTML:t._s(t.md.render(t.ex5))}})])]):t._e()])},ht=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"txts"},[s("h1",[t._v("問題を作成する")]),s("p",{staticClass:"sub-title"},[t._v("Create a New Problem")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"toc"},[s("h2",[t._v("もくじ")]),s("a",{attrs:{href:"#head1"}},[s("li",[t._v("Markdownを使ってみよう！")])]),s("a",{attrs:{href:"#head2"}},[s("li",[t._v("ヘッダーを書く")])]),s("a",{attrs:{href:"#head5"}},[s("li",[t._v("リストをつくる")])]),s("a",{attrs:{href:"#head3"}},[s("li",[t._v("リンクをつくる")])]),s("a",{attrs:{href:"#head8"}},[s("li",[t._v("引用する")])]),s("a",{attrs:{href:"#head7"}},[s("li",[t._v("画像を貼り付ける")])]),s("a",{attrs:{href:"#head4"}},[s("li",[t._v("数式を書く")])]),s("a",{attrs:{href:"#head6"}},[s("li",[t._v("表を書く")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("\n      以下では、問題作成や解答の編集に必要な限度でマークダウンの書き方を説明します。全般的に知りたい方は、"),s("a",{attrs:{href:"https://www.markdown.jp/syntax/"}},[t._v("こちらのページ")]),t._v("を参考にしてください。\n    ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("\n      ![画像の名前](画像のURL)のように書きます。そのため、画像を添付するには、まず画像のURLを入手しなければなりません。\n      もし、スマホなどで撮影した画像を使いたい場合は、"),s("a",{attrs:{href:"https://imgbb.com/"}},[t._v("imgbb")]),t._v("などに画像をアップロードして、URLをつくる必要があります。\n    ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("\n      分数やインテグラル、シグマ、行列なども綺麗に書けるので、"),s("a",{attrs:{href:"https://medemanabu.net/latex/operators/"}},[t._v("こちらのサイト")]),t._v("などを参考にしつつ、ぜひ積極的に使ってみてください。\n    ")])}],ft=s("d4cd"),gt=s.n(ft),_t=(s("be0f"),s("a68e")),wt=s.n(_t),Ct=s("7353"),xt=s.n(Ct),kt=s("e6f9"),yt=s.n(kt),St=s("30fa"),$t=s.n(St),Tt={head:{title:function(){return{inner:"問題を作成する"}},meta:[{name:"description",content:"問題を作成する"},{property:"og:title",content:"問題を作成する"},{property:"og:description",content:"問題を作成する"},{property:"og:type",content:"website"},{property:"og:url",content:"https://todaiapp.com/"},{property:"og:image",content:"../../public/img/logo.png"},{name:"twitter:card",content:"summary"}]},data:function(){return{ex1:"# 大きいヘッダー\n## 中くらいのヘッダー\n### 小さいヘッダー",ex2:"[東京大学ホームページ](https://www.u-tokyo.ac.jp/ja/index.html)",ex3:"$x=5$とする。このとき、\n\n$$\n5x^2+2\n$$\n\nの値を求めよ。",ex4:"- 項目1\n- 項目2\n- 項目3",ex5:"|a  |b  |c  |\n|---|---|---|\n|1  |2  |3  |\n|4  |5  |6  |",ex6:"![安田講堂](https://upload.wikimedia.org/wikipedia/commons/2/23/Yasuda_Auditorium_-_Tokyo_University_3.jpg)",ex7:"本文内での引用：\n\n> Lorem ipsum dolor sit amet, purus lectus magna lobortis convallis elit, lobortis volutpat.\n\n脚注による引用：\n\nLorem ipsum dolor sit amet, purus lectus magna lobortis convallis elit, lobortis volutpat[^1].\n\n[^1]: Lorem ipsum dolor sit amet, purus lectus magna lobortis convallis elit, lobortis volutpat.",currentUser:{},title:"",content:"",answer:"",activeTab:"editor",selectedSubject:"英語",selectedGenre:"",isShown:!1,genreEnglish:["要約","和訳","英作文","リスニング","英文法","英訳","総合問題"],genreMath:["数I","数II","数III","数A","数B","数C"],md:new gt.a({html:!0,linkify:!0,breaks:!0,typographer:!0}).use($t.a).use(wt.a,{throwOnError:!1,errorColor:" #cc0000"}).use(xt.a,{youtube:{width:250,height:150}}).use(yt.a)}},created:function(){var t=this;ie.onAuthStateChanged(function(e){t.currentUser=e})},methods:{saveProblem:function(){var t=this;if(this.selectedSubject&&this.selectedGenre&&this.title&&this.content&&this.answer){var e=new Date;oe.collection("problems").add({title:this.title,subject:this.selectedSubject,genre:this.selectedGenre,content:this.content,user:this.currentUser.uid,date:e}).then(function(e){t.$toasted.show("Congrats! 問題が公開されました。",{position:"top-center",duration:1500}),t.createAnswer(e.id),t.$router.push("/problem/"+e.id)})}else this.$toasted.show("全ての項目を選択・記入してください。",{position:"top-center",duration:1500})},createAnswer:function(t){var e=new Date;oe.collection("answers").doc(t+"-"+this.currentUser.uid).set({content:this.answer,problem:t,user:this.currentUser.uid,date:e,problemAuthor:this.currentUser.uid,problemTitle:this.title,problemSubject:this.selectedSubject,problemGenre:this.selectedGenre})}}},jt=Tt,At=(s("0ae0"),Object(p["a"])(jt,bt,ht,!1,null,"ea018b5a",null)),Ut=At.exports,Pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"problem"},[s("a",{attrs:{href:"https://twitter.com/intent/tweet?text=【"+t.problem.subject+" "+t.problem.genre+"】「"+t.problem.title+"」%20-%20todaiAppで解く&url=https://todaiapp.com/problem/"+t.$route.params.id,target:"_black"}},[s("button",{staticClass:"flex btn-with-img tweet-btn bg",class:{leanrightbg:!t.currentUser}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:["fab","twitter"]}})],1),s("p",{staticClass:"txt"},[t._v("問題をシェア")])]),s("button",{staticClass:"btn tweet-btn sm",class:{leanright:!t.currentUser}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:["fab","twitter"]}})],1),s("p",{staticClass:"txt"},[t._v("問題をシェア")])])]),s("div",{staticClass:"title"},[s("div",{staticClass:"subjects"},[s("span",[t._v(t._s(t.problem.subject))]),s("span",[t._v("|")]),s("span",[t._v(t._s(t.problem.genre))])]),s("h2",[t._v(t._s(t.problem.title))]),s("div",{staticClass:"flex"},[s("div",{staticClass:"img",style:"background-image: url("+t.user.photoURL+");"},[s("div",{staticClass:"badge contribution",class:{padawan:t.problemsSolved.length+3*t.problemsCreated.length<4,intermediate:t.problemsSolved.length+3*t.problemsCreated.length>=4&&t.problemsSolved.length+3*t.problemsCreated.length<10,master:t.problemsSolved.length+3*t.problemsCreated.length>=10&&t.problemsSolved.length+3*t.problemsCreated.length<20,lord:t.problemsSolved.length+3*t.problemsCreated.length>=20}},[t._v("\n          "+t._s(t.problemsSolved.length+3*t.problemsCreated.length)+"\n        ")]),t.user.twitter?s("a",{attrs:{href:"https://twitter.com/"+t.user.twitter,target:"_blank"}},[s("div",{staticClass:"badge twicon"},[s("fa",{attrs:{icon:["fab","twitter"]}})],1)]):t._e()]),s("div",{staticClass:"txts"},[t.user.nickname?s("p",{staticClass:"name"},[t._v(t._s(t.user.nickname))]):s("p",{staticClass:"name"},[t._v(t._s(t.user.name))]),s("p",{staticClass:"info"},[t.user.school?s("span",[t._v(t._s(t.user.school))]):t._e(),t.user.grade?s("span",[t._v(" ("+t._s(t.user.grade)+")")]):t._e()])])])]),s("nav",{staticClass:"flex page-nav"},[s("button",{staticClass:"flex btn-with-img",class:{active:"question"==t.activeTab},on:{click:function(e){t.activeTab="question"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"question"}})],1),s("p",{staticClass:"txt"},[t._v("問題")])]),t.currentUser?s("button",{staticClass:"flex btn-with-img",class:{active:"myAnswer"==t.activeTab},on:{click:function(e){t.activeTab="myAnswer"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"pen-alt"}})],1),s("p",{staticClass:"txt"},[t._v("あなたの解答")])]):t._e(),s("button",{staticClass:"flex btn-with-img",class:{active:"answers"==t.activeTab},on:{click:function(e){t.activeTab="answers"}}},[s("div",{staticClass:"img"},[s("fa",{attrs:{icon:"grin"}})],1),s("p",{staticClass:"txt"},[t._v(t._s(t.answers.length)+"人の解答")])])]),"question"==t.activeTab?s("div",{staticClass:"tab-content body"},[t.currentUser&&t.currentUser.uid==t.uid?s("div",{staticClass:"flex"},[s("button",{staticClass:"box-btn",on:{click:function(e){t.qeditable=!t.qeditable}}},[t.qeditable?s("fa",{attrs:{icon:"eye"}}):s("fa",{attrs:{icon:"pen-alt"}}),t.qeditable?s("span",[t._v(" プレビュー")]):s("span",[t._v(" 編集する")])],1),t.qeditable?s("button",{staticClass:"box-btn",on:{click:t.updateProblem}},[s("fa",{attrs:{icon:"save"}}),s("span",[t._v(" 保存する")])],1):t._e()]):t._e(),s("p",{staticClass:"toi"},[t._v("問")]),t.qeditable?s("div",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.problem.content,expression:"problem.content"}],domProps:{value:t.problem.content},on:{input:function(e){e.target.composing||t.$set(t.problem,"content",e.target.value)}}})]):s("div",{domProps:{innerHTML:t._s(t.md.render(t.problem.content))}})]):t._e(),"myAnswer"==t.activeTab?s("div",{staticClass:"tab-content body"},[s("div",{staticClass:"flex"},[s("button",{staticClass:"box-btn",on:{click:function(e){t.aeditable=!t.aeditable}}},[t.aeditable?s("fa",{attrs:{icon:"eye"}}):s("fa",{attrs:{icon:"pen-alt"}}),t.aeditable?s("span",[t._v(" プレビュー")]):s("span",[t._v(" 編集する")])],1),t.myAnswer&&t.aeditable?s("button",{staticClass:"box-btn",on:{click:t.updateAnswer}},[s("fa",{attrs:{icon:"save"}}),s("span",[t._v(" 保存する")])],1):!t.myAnswer&&t.aeditable?s("button",{staticClass:"box-btn",on:{click:t.saveAnswer}},[s("fa",{attrs:{icon:"save"}}),s("span",[t._v(" 公開する")])],1):t._e()]),t.myAnswer?s("div",[t.aeditable?s("div",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.myAnswer.content,expression:"myAnswer.content"}],domProps:{value:t.myAnswer.content},on:{input:function(e){e.target.composing||t.$set(t.myAnswer,"content",e.target.value)}}})]):s("div",{domProps:{innerHTML:t._s(t.md.render(t.myAnswer.content))}})]):s("div",[t.aeditable?s("div",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newAnswer,expression:"newAnswer"}],domProps:{value:t.newAnswer},on:{input:function(e){e.target.composing||(t.newAnswer=e.target.value)}}})]):s("div",{domProps:{innerHTML:t._s(t.md.render(t.newAnswer))}})])]):t._e(),"answers"==t.activeTab?s("div",{staticClass:"tab-content"},[s("div",t._l(t.answers,function(t){return s("AnswerItem",{key:t.id,attrs:{data:t}})}),1)]):t._e()])},It=[],Et=(s("ac6a"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"answer-item item"},[s("UserInfo",{staticClass:"user-info",attrs:{uid:t.data.user}}),t.shown?s("div",{staticClass:"body",domProps:{innerHTML:t._s(t.md.render(t.data.content))}}):t._e(),s("p",{staticClass:"date"}),s("button",{staticClass:"toggle-btn",on:{click:function(e){t.shown=!t.shown}}},[t.shown?s("fa",{attrs:{icon:"chevron-up"}}):s("fa",{attrs:{icon:"chevron-down"}})],1),s("div",{staticClass:"like-btn",class:{likes:t.likes},on:{click:t.toggleLike}},[s("fa",{attrs:{icon:"heart"}}),s("span",[t._v(t._s(t.likers.length))])],1)],1)}),Lt=[],Ot={props:["data"],components:{UserInfo:H},data:function(){return{currentUser:{},likers:[],likes:!1,shown:!1,md:new gt.a({html:!0,linkify:!0,breaks:!0,typographer:!0}).use($t.a).use(wt.a,{throwOnError:!1,errorColor:" #cc0000"})}},created:function(){var t=this;ie.onAuthStateChanged(function(e){t.currentUser=e,oe.collection("answers").doc(t.$props.data.id).collection("likers").doc(e.uid).onSnapshot(function(e){e.exists?t.likes=!0:t.likes=!1})})},firestore:function(){return{likers:oe.collection("answers").doc(this.$props.data.id).collection("likers")}},methods:{toggleLike:function(){var t=this;if(this.currentUser)this.likes?oe.collection("answers").doc(this.$props.data.id).collection("likers").doc(this.currentUser.uid).delete():oe.collection("answers").doc(this.$props.data.id).collection("likers").doc(this.currentUser.uid).set({liker:this.currentUser.uid},{merge:!0});else{var e=new l.a.auth.GoogleAuthProvider;ie.signInWithPopup(e).then(function(e){t.createUser(e.user),t.$router.push("/user/"+e.user.uid),t.$toasted.show(e.user.displayName+"さん、こんにちは！",{position:"top-center",duration:1500})})}},createUser:function(t){oe.collection("users").doc(t.uid).set({name:t.displayName,photoURL:t.photoURL,email:t.email,schoolPublic:!0},{merge:!0})}}},Gt=Ot,Nt=(s("110b"),Object(p["a"])(Gt,Et,Lt,!1,null,"0db573b2",null)),Mt=Nt.exports,qt={data:function(){return{qeditable:!1,aeditable:!0,currentUser:{},problemsCreated:[],problemsSolved:[],problem:{},user:{},uid:"",myAnswer:{},newAnswer:"",answers:[],activeTab:"question",md:new gt.a({html:!0,linkify:!0,breaks:!0,typographer:!0}).use($t.a).use(wt.a,{throwOnError:!1,errorColor:" #cc0000"}).use(xt.a,{youtube:{width:250,height:150}}).use(yt.a)}},head:{title:function(){return{inner:"問題ページ"}},meta:[{name:"description",content:"問題ページ"},{property:"og:title",content:"問題ページ"},{property:"og:description",content:"問題ページ"},{property:"og:type",content:"website"},{property:"og:url",content:"https://todaiapp.com/"},{property:"og:image",content:"../../public/img/logo.png"},{name:"twitter:card",content:"summary"}]},components:{AnswerItem:Mt},created:function(){var t=this;ie.onAuthStateChanged(function(e){t.currentUser=e,oe.collection("answers").doc(t.$route.params.id+"-"+e.uid).get().then(function(e){e&&(t.myAnswer=e.data())})}),oe.collection("problems").doc(this.$route.params.id).get().then(function(e){t.problem=e.data(),oe.collection("users").doc(e.data().user).get().then(function(e){t.user=e.data(),t.uid=e.id}),oe.collection("problems").where("user","==",e.data().user).get().then(function(e){e.forEach(function(e){t.problemsCreated.push(e.data())})}),oe.collection("answers").where("user","==",e.data().user).get().then(function(e){e.forEach(function(e){t.problemsSolved.push(e.data())})})})},firestore:function(){return{answers:oe.collection("answers").where("problem","==",this.$route.params.id)}},methods:{updateProblem:function(){oe.collection("problems").doc(this.$route.params.id).set({content:this.problem.content},{merge:!0}).then(this.$toasted.show("問題を更新しました！",{position:"top-center",duration:1500}),this.qeditable=!1)},updateAnswer:function(){oe.collection("answers").doc(this.$route.params.id+"-"+this.currentUser.uid).set({content:this.myAnswer.content},{merge:!0}).then(this.$toasted.show("解答を更新しました！",{position:"top-center",duration:1500}),this.aeditable=!1)},saveAnswer:function(){var t=new Date;oe.collection("answers").doc(this.$route.params.id+"-"+this.currentUser.uid).set({content:this.newAnswer,date:t,problem:this.$route.params.id,user:this.currentUser.uid,problemAuthor:this.problem.user,problemTitle:this.problem.title,problemSubject:this.problem.subject,problemGenre:this.problem.genre},{merge:!0}).then(this.$toasted.show("解答を公開しました！",{position:"top-center",duration:1500}),this.aeditable=!1)}}},Bt=qt,Rt=(s("1057"),Object(p["a"])(Bt,Pt,It,!1,null,"2dedbf7c",null)),Ht=Rt.exports;n["a"].use(y["a"]);var Ft=new y["a"]({mode:"history",base:"/",routes:[{path:"/",name:"top",component:K},{path:"/user/:uid",name:"user",component:ct},{path:"/user-public/:uid",name:"user-public",component:vt},{path:"/edit",name:"editor",component:Ut},{path:"/problem/:id",name:"problem",component:Ht}]}),Dt=s("9483");Object(Dt["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var Jt=s("0ff2"),Xt=s("59ca"),zt=s.n(Xt),Wt=(s("e71f"),s("ecee")),Yt=s("c074"),Kt=s("f2d1"),Qt=s("ad3d"),Zt=s("a65d"),Vt=s.n(Zt),te=s("342d"),ee=s.n(te),se=s("bf74"),ne=s.n(se),ae=s("0284"),re=s.n(ae);s.d(e,"db",function(){return oe}),s.d(e,"auth",function(){return ie}),n["a"].use(s("395c")),n["a"].use(ne.a.Adsense),n["a"].use(ne.a.InArticleAdsense),n["a"].use(ne.a.InFeedAdsense),n["a"].use(ee.a,{separator:" | "}),Wt["c"].add(Yt["p"],Yt["l"],Yt["k"],Yt["j"],Yt["h"],Yt["d"],Yt["n"],Yt["f"],Yt["m"],Yt["o"],Yt["g"],Yt["i"],Kt["a"],Yt["b"],Yt["a"],Yt["e"],Yt["c"]),n["a"].component("fa",Qt["a"]),n["a"].use(Jt["a"]),n["a"].use(Vt.a),zt.a.initializeApp({apiKey:"AIzaSyBzC1UsJJBYTkpeZMJtQSFIBr1tSG8A9pI",authDomain:"todaiapp.firebaseapp.com",databaseURL:"https://todaiapp.firebaseio.com",projectId:"todaiapp",storageBucket:"todaiapp.appspot.com",messagingSenderId:"360241228373",appId:"1:360241228373:web:e657985af99244db"});var oe=zt.a.firestore(),ie=zt.a.auth();n["a"].use(re.a,{id:"UA-XXX-X",router:Ft}),n["a"].config.productionTip=!1,new n["a"]({router:Ft,render:function(t){return t(k)}}).$mount("#app")},5839:function(t,e,s){},"5a16":function(t,e,s){},"6cd9":function(t,e,s){"use strict";var n=s("eea0"),a=s.n(n);a.a},7384:function(t,e,s){},"760a":function(t,e,s){"use strict";var n=s("f305"),a=s.n(n);a.a},"7faf":function(t,e,s){"use strict";var n=s("8fba"),a=s.n(n);a.a},8742:function(t,e,s){},"8c64":function(t,e,s){"use strict";var n=s("182a"),a=s.n(n);a.a},"8e14":function(t,e,s){"use strict";var n=s("7384"),a=s.n(n);a.a},"8fba":function(t,e,s){},cbcb:function(t,e,s){"use strict";var n=s("8742"),a=s.n(n);a.a},d11b:function(t,e,s){},eea0:function(t,e,s){},f305:function(t,e,s){}});
//# sourceMappingURL=app.306159e3.js.map